{"version":3,"file":"mint-unique-metadata-function.js","names":["_dictionary","require","_validateProps","_getDataFromFile","_mintingError","_mintToken","mintUniqueMetadataFunction","_ref","client","tokenId","batchSize","supplyKey","pathToMetadataURIsFile","metadataArray","validatePropsForUniqueNFTMinting","mintedNFTs","metaData","getDataFromFile","length","Error","dictionary","hederaActions","metadataRequired","numberOfCalls","Math","ceil","i","batch","slice","mintTokenReceipt","mintToken","result","serials","map","longValue","index","content","serialNumber","toNumber","push","error","MintingError","mintingError","flat","exports"],"sources":["../../../src/nftSDKFunctions/mint-unique-metadata-function.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { dictionary } from '../utils/constants/dictionary';\nimport { MintedNFTType, MintUniqueTokenType } from '../types/mint-token';\nimport { validatePropsForUniqueNFTMinting } from '../utils/validate-props';\nimport { getDataFromFile } from '../helpers/get-data-from-file';\nimport { MintingError } from '../utils/minting-error';\nimport { mintToken } from './mint-token';\n\nexport const mintUniqueMetadataFunction = async ({\n  client,\n  tokenId,\n  batchSize = 5,\n  supplyKey,\n  pathToMetadataURIsFile,\n  metadataArray,\n}: MintUniqueTokenType) => {\n  validatePropsForUniqueNFTMinting({\n    batchSize,\n    tokenId,\n    pathToMetadataURIsFile,\n    supplyKey,\n    metadataArray,\n  });\n  const mintedNFTs: MintedNFTType[] = [];\n\n  const metaData = pathToMetadataURIsFile ? await getDataFromFile(pathToMetadataURIsFile) : metadataArray || [];\n  if (!metaData.length) throw new Error(dictionary.hederaActions.metadataRequired);\n\n  try {\n    const numberOfCalls = Math.ceil(metaData.length / batchSize);\n    for (let i = 0; i < numberOfCalls; i++) {\n      const batch = metaData.slice(i * batchSize, (i + 1) * batchSize);\n      const mintTokenReceipt = await mintToken(batch, tokenId, supplyKey, client);\n\n      const result: MintedNFTType[] = mintTokenReceipt?.serials.map((longValue, index) => {\n        return {\n          content: batch[index],\n          serialNumber: longValue.toNumber(),\n        };\n      });\n\n      if (result) {\n        mintedNFTs.push(...result);\n      }\n    }\n  } catch (error) {\n    throw new MintingError(`${dictionary.hederaActions.mintingError} ${error}`, mintedNFTs.flat());\n  }\n\n  return mintedNFTs.flat();\n};\n"],"mappings":";;;;;;AAmBA,IAAAA,WAAA,GAAAC,OAAA;AAEA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,gBAAA,GAAAF,OAAA;AACA,IAAAG,aAAA,GAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AAxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAQO,MAAMK,0BAA0B,GAAG,MAAAC,IAAA,IAOf;EAAA,IAPsB;IAC/CC,MAAM;IACNC,OAAO;IACPC,SAAS,GAAG,CAAC;IACbC,SAAS;IACTC,sBAAsB;IACtBC;EACmB,CAAC,GAAAN,IAAA;EACpB,IAAAO,+CAAgC,EAAC;IAC/BJ,SAAS;IACTD,OAAO;IACPG,sBAAsB;IACtBD,SAAS;IACTE;EACF,CAAC,CAAC;EACF,MAAME,UAA2B,GAAG,EAAE;EAEtC,MAAMC,QAAQ,GAAGJ,sBAAsB,GAAG,MAAM,IAAAK,gCAAe,EAACL,sBAAsB,CAAC,GAAGC,aAAa,IAAI,EAAE;EAC7G,IAAI,CAACG,QAAQ,CAACE,MAAM,EAAE,MAAM,IAAIC,KAAK,CAACC,sBAAU,CAACC,aAAa,CAACC,gBAAgB,CAAC;EAEhF,IAAI;IACF,MAAMC,aAAa,GAAGC,IAAI,CAACC,IAAI,CAACT,QAAQ,CAACE,MAAM,GAAGR,SAAS,CAAC;IAC5D,KAAK,IAAIgB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,aAAa,EAAEG,CAAC,EAAE,EAAE;MACtC,MAAMC,KAAK,GAAGX,QAAQ,CAACY,KAAK,CAACF,CAAC,GAAGhB,SAAS,EAAE,CAACgB,CAAC,GAAG,CAAC,IAAIhB,SAAS,CAAC;MAChE,MAAMmB,gBAAgB,GAAG,MAAM,IAAAC,oBAAS,EAACH,KAAK,EAAElB,OAAO,EAAEE,SAAS,EAAEH,MAAM,CAAC;MAE3E,MAAMuB,MAAuB,GAAGF,gBAAgB,EAAEG,OAAO,CAACC,GAAG,CAAC,CAACC,SAAS,EAAEC,KAAK,KAAK;QAClF,OAAO;UACLC,OAAO,EAAET,KAAK,CAACQ,KAAK,CAAC;UACrBE,YAAY,EAAEH,SAAS,CAACI,QAAQ,CAAC;QACnC,CAAC;MACH,CAAC,CAAC;MAEF,IAAIP,MAAM,EAAE;QACVhB,UAAU,CAACwB,IAAI,CAAC,GAAGR,MAAM,CAAC;MAC5B;IACF;EACF,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd,MAAM,IAAIC,0BAAY,CAAE,GAAErB,sBAAU,CAACC,aAAa,CAACqB,YAAa,IAAGF,KAAM,EAAC,EAAEzB,UAAU,CAAC4B,IAAI,CAAC,CAAC,CAAC;EAChG;EAEA,OAAO5B,UAAU,CAAC4B,IAAI,CAAC,CAAC;AAC1B,CAAC;AAACC,OAAA,CAAAtC,0BAAA,GAAAA,0BAAA","ignoreList":[]}