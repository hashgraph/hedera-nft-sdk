{"version":3,"file":"mint-shared-metadata-function.js","names":["_dictionary","require","_validateProps","_mintingError","_mintToken","mintSharedMetadataFunction","_ref","client","tokenId","amount","batchSize","metaData","supplyKey","validatePropsForSharedNFTMinting","mintedNFTs","numberOfCalls","Math","ceil","i","metadataBatchArray","Array","min","fill","mintTokenReceipt","mintToken","result","serials","map","longValue","content","serialNumber","toNumber","push","flat","error","MintingError","dictionary","hederaActions","mintingError","exports"],"sources":["../../../src/nftSDKFunctions/mint-shared-metadata-function.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { dictionary } from '../utils/constants/dictionary';\nimport { MintedNFTType, MintTokenType } from '../types/mint-token';\nimport { validatePropsForSharedNFTMinting } from '../utils/validate-props';\nimport { MintingError } from '../utils/minting-error';\nimport { mintToken } from './mint-token';\n\nexport const mintSharedMetadataFunction = async ({ client, tokenId, amount, batchSize, metaData, supplyKey }: MintTokenType) => {\n  validatePropsForSharedNFTMinting({ tokenId, amount, metaData, supplyKey, batchSize });\n\n  const mintedNFTs: MintedNFTType[] = [];\n  // Example if amount = 8 and batchSize = 5. NumberOfCalls should be 2. So 8/5 = 1.6. Math.ceil(1.6) = 2. Because Math.ceil rounds up to the next largest integer.\n  const numberOfCalls = Math.ceil(amount / batchSize);\n\n  try {\n    for (let i = 0; i < numberOfCalls; i++) {\n      const metadataBatchArray = new Array(Math.min(batchSize, amount)).fill(metaData);\n      amount -= batchSize;\n      const mintTokenReceipt = await mintToken(metadataBatchArray, tokenId, supplyKey, client);\n\n      const result: MintedNFTType[] = mintTokenReceipt?.serials.map((longValue) => {\n        return {\n          content: metaData,\n          serialNumber: longValue.toNumber(),\n        };\n      });\n\n      if (result) {\n        mintedNFTs.push(...result);\n      }\n    }\n\n    return mintedNFTs.flat();\n  } catch (error) {\n    throw new MintingError(`${dictionary.hederaActions.mintingError} ${error}`, mintedNFTs.flat());\n  }\n};\n"],"mappings":";;;;;;AAmBA,IAAAA,WAAA,GAAAC,OAAA;AAEA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,aAAA,GAAAF,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AAvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAOO,MAAMI,0BAA0B,GAAG,MAAAC,IAAA,IAAsF;EAAA,IAA/E;IAAEC,MAAM;IAAEC,OAAO;IAAEC,MAAM;IAAEC,SAAS;IAAEC,QAAQ;IAAEC;EAAyB,CAAC,GAAAN,IAAA;EACzH,IAAAO,+CAAgC,EAAC;IAAEL,OAAO;IAAEC,MAAM;IAAEE,QAAQ;IAAEC,SAAS;IAAEF;EAAU,CAAC,CAAC;EAErF,MAAMI,UAA2B,GAAG,EAAE;EACtC;EACA,MAAMC,aAAa,GAAGC,IAAI,CAACC,IAAI,CAACR,MAAM,GAAGC,SAAS,CAAC;EAEnD,IAAI;IACF,KAAK,IAAIQ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,aAAa,EAAEG,CAAC,EAAE,EAAE;MACtC,MAAMC,kBAAkB,GAAG,IAAIC,KAAK,CAACJ,IAAI,CAACK,GAAG,CAACX,SAAS,EAAED,MAAM,CAAC,CAAC,CAACa,IAAI,CAACX,QAAQ,CAAC;MAChFF,MAAM,IAAIC,SAAS;MACnB,MAAMa,gBAAgB,GAAG,MAAM,IAAAC,oBAAS,EAACL,kBAAkB,EAAEX,OAAO,EAAEI,SAAS,EAAEL,MAAM,CAAC;MAExF,MAAMkB,MAAuB,GAAGF,gBAAgB,EAAEG,OAAO,CAACC,GAAG,CAAEC,SAAS,IAAK;QAC3E,OAAO;UACLC,OAAO,EAAElB,QAAQ;UACjBmB,YAAY,EAAEF,SAAS,CAACG,QAAQ,CAAC;QACnC,CAAC;MACH,CAAC,CAAC;MAEF,IAAIN,MAAM,EAAE;QACVX,UAAU,CAACkB,IAAI,CAAC,GAAGP,MAAM,CAAC;MAC5B;IACF;IAEA,OAAOX,UAAU,CAACmB,IAAI,CAAC,CAAC;EAC1B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAM,IAAIC,0BAAY,CAAE,GAAEC,sBAAU,CAACC,aAAa,CAACC,YAAa,IAAGJ,KAAM,EAAC,EAAEpB,UAAU,CAACmB,IAAI,CAAC,CAAC,CAAC;EAChG;AACF,CAAC;AAACM,OAAA,CAAAlC,0BAAA,GAAAA,0BAAA","ignoreList":[]}