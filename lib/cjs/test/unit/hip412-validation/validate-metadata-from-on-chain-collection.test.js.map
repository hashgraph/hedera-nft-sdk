{"version":3,"file":"validate-metadata-from-on-chain-collection.test.js","names":["_axios","_interopRequireDefault","require","_mirrorNode","_consts","obj","__esModule","default","jest","mock","mockedAxios","axios","mockResponsePage1","data","nfts","id","name","links","next","NFT_FROM_TOKEN_EXAMPLE_BASE_URL","mockResponsePage2","describe","beforeEach","get","mockReset","it","mockResolvedValueOnce","result","getNFTsFromToken","expect","length","toBe","toHaveBeenCalledTimes","mockRejectedValue","Error","NETWORK_ERROR","rejects","toThrow"],"sources":["../../../../../src/test/unit/hip412-validation/validate-metadata-from-on-chain-collection.test.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport axios from 'axios';\nimport { getNFTsFromToken } from '../../../api/mirror-node';\nimport { NFT_FROM_TOKEN_EXAMPLE_BASE_URL, NETWORK_ERROR } from '../../__mocks__/consts';\n\njest.mock('axios');\nconst mockedAxios = axios as jest.Mocked<typeof axios>;\n\nconst mockResponsePage1 = {\n  data: {\n    nfts: [\n      { id: 1, name: 'NFT 1' },\n      { id: 2, name: 'NFT 2' },\n    ],\n    links: { next: NFT_FROM_TOKEN_EXAMPLE_BASE_URL },\n  },\n};\n\nconst mockResponsePage2 = {\n  data: {\n    nfts: [{ id: 3, name: 'NFT 3' }],\n    links: { next: null },\n  },\n};\n\ndescribe('getNFTsFromToken', () => {\n  beforeEach(() => {\n    mockedAxios.get.mockReset();\n  });\n\n  it('fetches all pages of NFTs collection correctly', async () => {\n    mockedAxios.get.mockResolvedValueOnce(mockResponsePage1).mockResolvedValueOnce(mockResponsePage2);\n\n    const result = await getNFTsFromToken('testnet', '1');\n    expect(result.length).toBe(3);\n    expect(mockedAxios.get).toHaveBeenCalledTimes(2);\n  });\n\n  it('properly handles HTTP errors', async () => {\n    mockedAxios.get.mockRejectedValue(new Error(NETWORK_ERROR));\n    await expect(getNFTsFromToken('testnet', '1')).rejects.toThrow(NETWORK_ERROR);\n  });\n});\n"],"mappings":";;AAmBA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AAAwF,SAAAD,uBAAAI,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AArBxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKAG,IAAI,CAACC,IAAI,CAAC,OAAO,CAAC;AAClB,MAAMC,WAAW,GAAGC,cAAkC;AAEtD,MAAMC,iBAAiB,GAAG;EACxBC,IAAI,EAAE;IACJC,IAAI,EAAE,CACJ;MAAEC,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,EACxB;MAAED,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,CACzB;IACDC,KAAK,EAAE;MAAEC,IAAI,EAAEC;IAAgC;EACjD;AACF,CAAC;AAED,MAAMC,iBAAiB,GAAG;EACxBP,IAAI,EAAE;IACJC,IAAI,EAAE,CAAC;MAAEC,EAAE,EAAE,CAAC;MAAEC,IAAI,EAAE;IAAQ,CAAC,CAAC;IAChCC,KAAK,EAAE;MAAEC,IAAI,EAAE;IAAK;EACtB;AACF,CAAC;AAEDG,QAAQ,CAAC,kBAAkB,EAAE,MAAM;EACjCC,UAAU,CAAC,MAAM;IACfZ,WAAW,CAACa,GAAG,CAACC,SAAS,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEFC,EAAE,CAAC,gDAAgD,EAAE,YAAY;IAC/Df,WAAW,CAACa,GAAG,CAACG,qBAAqB,CAACd,iBAAiB,CAAC,CAACc,qBAAqB,CAACN,iBAAiB,CAAC;IAEjG,MAAMO,MAAM,GAAG,MAAM,IAAAC,4BAAgB,EAAC,SAAS,EAAE,GAAG,CAAC;IACrDC,MAAM,CAACF,MAAM,CAACG,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;IAC7BF,MAAM,CAACnB,WAAW,CAACa,GAAG,CAAC,CAACS,qBAAqB,CAAC,CAAC,CAAC;EAClD,CAAC,CAAC;EAEFP,EAAE,CAAC,8BAA8B,EAAE,YAAY;IAC7Cf,WAAW,CAACa,GAAG,CAACU,iBAAiB,CAAC,IAAIC,KAAK,CAACC,qBAAa,CAAC,CAAC;IAC3D,MAAMN,MAAM,CAAC,IAAAD,4BAAgB,EAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAACQ,OAAO,CAACC,OAAO,CAACF,qBAAa,CAAC;EAC/E,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}