{"version":3,"file":"decode-metadata-url.js","names":["_dictionary","require","_errorToMessage","decodeMetadataUrl","encodedMetadata","ipfsGateway","decodedUrl","atob","error","Error","errorToMessage","startsWith","dictionary","errors","ipfsGatewayRequired","replace","exports"],"sources":["../../../src/helpers/decode-metadata-url.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { dictionary } from '../utils/constants/dictionary';\nimport { errorToMessage } from './error-to-message';\n\nexport const decodeMetadataUrl = (encodedMetadata: string, ipfsGateway?: string): string => {\n  let decodedUrl = '';\n  try {\n    decodedUrl = atob(encodedMetadata);\n  } catch (error) {\n    throw new Error(errorToMessage(error));\n  }\n\n  if (!decodedUrl.startsWith('https://') && !decodedUrl.startsWith('http://') && !ipfsGateway) {\n    throw new Error(dictionary.errors.ipfsGatewayRequired);\n  }\n\n  if (decodedUrl.startsWith('ipfs://') && ipfsGateway) {\n    decodedUrl = decodedUrl.replace('ipfs://', ipfsGateway);\n  } else if (!decodedUrl.startsWith('https://') && !decodedUrl.startsWith('http://') && ipfsGateway) {\n    decodedUrl = `${ipfsGateway}${decodedUrl}`;\n  }\n\n  return decodedUrl;\n};\n"],"mappings":";;;;;;AAmBA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,eAAA,GAAAD,OAAA;AApBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIO,MAAME,iBAAiB,GAAGA,CAACC,eAAuB,EAAEC,WAAoB,KAAa;EAC1F,IAAIC,UAAU,GAAG,EAAE;EACnB,IAAI;IACFA,UAAU,GAAGC,IAAI,CAACH,eAAe,CAAC;EACpC,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,IAAAC,8BAAc,EAACF,KAAK,CAAC,CAAC;EACxC;EAEA,IAAI,CAACF,UAAU,CAACK,UAAU,CAAC,UAAU,CAAC,IAAI,CAACL,UAAU,CAACK,UAAU,CAAC,SAAS,CAAC,IAAI,CAACN,WAAW,EAAE;IAC3F,MAAM,IAAII,KAAK,CAACG,sBAAU,CAACC,MAAM,CAACC,mBAAmB,CAAC;EACxD;EAEA,IAAIR,UAAU,CAACK,UAAU,CAAC,SAAS,CAAC,IAAIN,WAAW,EAAE;IACnDC,UAAU,GAAGA,UAAU,CAACS,OAAO,CAAC,SAAS,EAAEV,WAAW,CAAC;EACzD,CAAC,MAAM,IAAI,CAACC,UAAU,CAACK,UAAU,CAAC,UAAU,CAAC,IAAI,CAACL,UAAU,CAACK,UAAU,CAAC,SAAS,CAAC,IAAIN,WAAW,EAAE;IACjGC,UAAU,GAAI,GAAED,WAAY,GAAEC,UAAW,EAAC;EAC5C;EAEA,OAAOA,UAAU;AACnB,CAAC;AAACU,OAAA,CAAAb,iBAAA,GAAAA,iBAAA","ignoreList":[]}