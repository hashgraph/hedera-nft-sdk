{"version":3,"file":"validate-object-with-schema.js","names":["_dictionary","require","_filter","_interopRequireDefault","_keys","_zodError","_validationError","obj","__esModule","default","noPropertiesErrorOptions","exports","prefix","delimiter","error","message","enabled","transform","_ref","value","path","_ref2","messageComponent","propertiesErrorOptions","type","label","_ref3","code","component","_ref4","errorMessage","validationMetadataErrorOptions","_ref5","_ref6","validateObjectWithSchema","Schema","object","errorMessageOptions","arguments","length","undefined","validation","safeParse","success","errorMessages","issues","map","issue","generateErrorMessage","ValidationError","parsedObjectWithSchema","parse","overPropertiesFromObjectWhichAreNotInSchema","filter","keys","key","includes","Error","dictionary","invalidKeysDetected"],"sources":["../../../src/helpers/validate-object-with-schema.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { dictionary } from '../utils/constants/dictionary';\nimport filter from 'lodash/filter';\nimport keys from 'lodash/keys';\nimport { type z } from 'zod';\nimport type { ErrorMessageOptions } from 'zod-error';\nimport { generateErrorMessage } from 'zod-error';\nimport { ValidationError } from '../utils/validation-error';\n\nexport const noPropertiesErrorOptions: ErrorMessageOptions = {\n  prefix: '',\n  delimiter: {\n    error: '\\n',\n  },\n  message: {\n    enabled: true,\n    transform: ({ value }) => value,\n  },\n  path: {\n    enabled: false,\n  },\n  transform: ({ messageComponent }) => messageComponent,\n};\n\nexport const propertiesErrorOptions: ErrorMessageOptions = {\n  prefix: '',\n  path: {\n    type: 'breadcrumbs',\n    enabled: true,\n    label: 'Invalid',\n    transform: ({ label, value }) => `${label} \"${value}\".`,\n  },\n  code: {\n    enabled: false,\n  },\n  delimiter: {\n    component: ' ',\n    error: '',\n  },\n  transform: ({ errorMessage }) => `${errorMessage}\\n`,\n};\n\nexport const validationMetadataErrorOptions: ErrorMessageOptions = {\n  prefix: '',\n  path: {\n    type: 'breadcrumbs',\n    enabled: true,\n    label: 'The required',\n    transform: ({ label, value }) => `${label} \"${value}\" field is missing.`,\n  },\n  code: {\n    enabled: false,\n  },\n  delimiter: {\n    component: ' ',\n    error: '',\n  },\n  message: { enabled: false },\n  transform: ({ errorMessage }) => errorMessage,\n};\n\nexport const validateObjectWithSchema = <T extends { [key: string]: string | unknown }>(\n  Schema: z.ZodSchema<T>,\n  object: z.infer<z.ZodSchema<T | unknown>>,\n  errorMessageOptions = noPropertiesErrorOptions\n): T => {\n  const validation = Schema.safeParse(object);\n  if (!validation.success) {\n    const errorMessages = validation.error.issues.map((issue) => generateErrorMessage([issue], errorMessageOptions));\n\n    throw new ValidationError(errorMessages);\n  }\n\n  const parsedObjectWithSchema = Schema.parse(object);\n  const overPropertiesFromObjectWhichAreNotInSchema = filter(keys(object), (key) => !keys(parsedObjectWithSchema).includes(key));\n\n  if (overPropertiesFromObjectWhichAreNotInSchema.length > 0) {\n    throw new Error(dictionary.validation.invalidKeysDetected(overPropertiesFromObjectWhichAreNotInSchema));\n  }\n\n  return object as z.infer<z.ZodSchema<T>>;\n};\n"],"mappings":"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","ignoreList":[]}