{"version":3,"file":"hip412-metadata-builder.test.js","names":["Hip412MetadataBuilder","MOCKED_NAME","MOCKED_IMAGE","MOCKED_TYPE","MOCKED_ATTRIBUTES_ALL_PARAMS","trait_type","value","display_type","max_value","MOCKED_ATTRIBUTES_REQUIRED_PARAMS","MOCKED_CREATOR","MOCKED_CREATOR_DID","MOCKED_DESCRIPTION","MOCKED_CHECKSUM","MOCKED_NESTED_METADATA","name","creator","description","image","type","properties","external_url","url","attributes","MOCKED_FILE_ALL_PARAMS","uri","is_default_file","metadata","metadata_uri","MOCKED_FILE_REQUIRED_PARAMS","MOCKED_PROPERTY_1","key","MOCKED_PROPERTY_2","MOCKED_PROPERTY_3","MOCKED_LOCALIZATION","default","locales","describe","it","builder","setName","setImage","setType","result","build","expect","toEqual","validationResult","isValid","toBe","errors","length","addAttribute","setCreator","setCreatorDID","setDescription","setChecksum","addFile","addProperty","setLocalization","toBeDefined","creatorDID","checksum","files","localization"],"sources":["../../../../src/test/unit/hip412-metadata-builder.test.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { Hip412MetadataBuilder } from '../../hip412-metadata-builder';\n\nconst MOCKED_NAME = 'Test NFT';\nconst MOCKED_IMAGE = 'https://example.com/nft.png';\nconst MOCKED_TYPE = 'image/png';\nconst MOCKED_ATTRIBUTES_ALL_PARAMS = { trait_type: 'color', value: 'red', display_type: 'percentage', max_value: 100 };\nconst MOCKED_ATTRIBUTES_REQUIRED_PARAMS = { trait_type: 'character', value: 'angry' };\nconst MOCKED_CREATOR = 'example_creator';\nconst MOCKED_CREATOR_DID = 'example_creator_did';\nconst MOCKED_DESCRIPTION = 'Example description lorem ipsum dolor sit amet';\nconst MOCKED_CHECKSUM = '9defbb6402d4bf39f2ea580099c73194647b24a659b6f6b778e3dd71755b8862';\nconst MOCKED_NESTED_METADATA = {\n  name: 'Example NFT 4',\n  creator: 'Hedera',\n  description: 'This is an example NFT 4',\n  image: 'https://nft.com/mycollection/4.jpg',\n  type: 'image/jpeg',\n  properties: {\n    external_url: 'https://nft.com/mycollection/4',\n    url: 'https://nft.com/mycollection/4',\n  },\n  attributes: [\n    { trait_type: 'color', value: 'rgb(0,255,0)', display_type: 'boolean' },\n    { trait_type: 'hasPipe', value: 'false' },\n    { trait_type: 'stamina', value: '55' },\n  ],\n};\nconst MOCKED_FILE_ALL_PARAMS = {\n  uri: 'https://example-11.com/high-res.png',\n  type: 'image/png',\n  is_default_file: true,\n  metadata: MOCKED_NESTED_METADATA,\n  metadata_uri: 'example_metadata_uri',\n};\nconst MOCKED_FILE_REQUIRED_PARAMS = {\n  uri: 'https://example-22.com/high-res.png',\n  type: 'image/gif',\n};\nconst MOCKED_PROPERTY_1 = { key: 'example_key_1', value: 'example_value_1' };\nconst MOCKED_PROPERTY_2 = { key: 'example_key_2', value: 'example_value_2' };\nconst MOCKED_PROPERTY_3 = { key: 'example_key_3', value: 'example_value_3' };\nconst MOCKED_LOCALIZATION = {\n  uri: 'example_uri',\n  default: 'en',\n  locales: ['en', 'pl'],\n};\n\ndescribe('Hip412MetadataBuilder', () => {\n  it('should create metadata with only required fields: name, image, and type', () => {\n    const builder = new Hip412MetadataBuilder().setName(MOCKED_NAME).setImage(MOCKED_IMAGE).setType(MOCKED_TYPE);\n    const result = builder.build();\n\n    expect(result.metadata.name).toEqual(MOCKED_NAME);\n    expect(result.metadata.image).toEqual(MOCKED_IMAGE);\n    expect(result.metadata.type).toEqual(MOCKED_TYPE);\n    expect(result.validationResult.isValid).toBe(true);\n    expect(result.validationResult.errors.length).toEqual(0);\n  });\n\n  it('should return one validation error when there is no name field provided for metadata object', () => {\n    const builder = new Hip412MetadataBuilder().setImage(MOCKED_IMAGE).setType(MOCKED_TYPE);\n    const result = builder.build();\n\n    expect(result.metadata.name).toEqual('');\n    expect(result.metadata.image).toEqual(MOCKED_IMAGE);\n    expect(result.metadata.type).toEqual(MOCKED_TYPE);\n    expect(result.validationResult.isValid).toBe(false);\n    expect(result.validationResult.errors.length).toEqual(1);\n  });\n\n  it('should return three validation errors when none of the required fields are provided', () => {\n    const builder = new Hip412MetadataBuilder();\n    const result = builder.build();\n\n    expect(result.metadata.name).toEqual('');\n    expect(result.metadata.image).toEqual('');\n    expect(result.metadata.type).toEqual('');\n    expect(result.validationResult.isValid).toBe(false);\n    expect(result.validationResult.errors.length).toEqual(3);\n  });\n\n  it('should return a full metadata object with all fields filled', () => {\n    const builder = new Hip412MetadataBuilder()\n      .setName(MOCKED_NAME)\n      .setImage(MOCKED_IMAGE)\n      .setType(MOCKED_TYPE)\n      .addAttribute(MOCKED_ATTRIBUTES_ALL_PARAMS)\n      .addAttribute(MOCKED_ATTRIBUTES_REQUIRED_PARAMS)\n      .setCreator(MOCKED_CREATOR)\n      .setCreatorDID(MOCKED_CREATOR_DID)\n      .setDescription(MOCKED_DESCRIPTION)\n      .setChecksum(MOCKED_CHECKSUM)\n      .addFile(MOCKED_FILE_ALL_PARAMS)\n      .addFile(MOCKED_FILE_REQUIRED_PARAMS)\n      .addProperty(MOCKED_PROPERTY_1)\n      .addProperty(MOCKED_PROPERTY_2)\n      .addProperty(MOCKED_PROPERTY_3)\n      .setLocalization(MOCKED_LOCALIZATION);\n\n    const result = builder.build();\n\n    expect(result.metadata.name).toEqual(MOCKED_NAME);\n    expect(result.metadata.image).toEqual(MOCKED_IMAGE);\n    expect(result.metadata.type).toEqual(MOCKED_TYPE);\n    expect(result.metadata.attributes).toBeDefined();\n    expect(result.metadata.attributes?.length).toEqual(2);\n    expect(result.metadata.attributes?.[0]).toEqual(MOCKED_ATTRIBUTES_ALL_PARAMS);\n    expect(result.metadata.attributes?.[1]).toEqual(MOCKED_ATTRIBUTES_REQUIRED_PARAMS);\n    expect(result.metadata.creator).toEqual(MOCKED_CREATOR);\n    expect(result.metadata.creatorDID).toEqual(MOCKED_CREATOR_DID);\n    expect(result.metadata.description).toEqual(MOCKED_DESCRIPTION);\n    expect(result.metadata.checksum).toEqual(MOCKED_CHECKSUM);\n    expect(result.metadata.files).toBeDefined();\n    expect(result.metadata.files?.length).toEqual(2);\n    expect(result.metadata.files?.[0]).toEqual(MOCKED_FILE_ALL_PARAMS);\n    expect(result.metadata.files?.[1]).toEqual(MOCKED_FILE_REQUIRED_PARAMS);\n    expect(result.metadata.properties).toBeDefined();\n    expect(result.metadata.properties?.[MOCKED_PROPERTY_1.key]).toEqual(MOCKED_PROPERTY_1.value);\n    expect(result.metadata.properties?.[MOCKED_PROPERTY_2.key]).toEqual(MOCKED_PROPERTY_2.value);\n    expect(result.metadata.properties?.[MOCKED_PROPERTY_3.key]).toEqual(MOCKED_PROPERTY_3.value);\n    expect(result.metadata.localization).toEqual(MOCKED_LOCALIZATION);\n    expect(result.validationResult.isValid).toBe(true);\n    expect(result.validationResult.errors.length).toEqual(0);\n  });\n});\n"],"mappings":"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","ignoreList":[]}