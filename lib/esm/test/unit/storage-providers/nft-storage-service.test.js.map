{"version":3,"file":"nft-storage-service.test.js","names":["Blob","axios","NftStorageService","dictionary","jest","mock","describe","serviceUrl","uploadUrl","apiKeysList","mockAxios","beforeEach","it","mockFile","Uint8Array","mockResponse","data","value","cid","create","mockReturnValue","post","mockResolvedValue","result","uploadFile","expect","toEqual","toThrow","errors","noApiKeys"],"sources":["../../../../../src/test/unit/storage-providers/nft-storage-service.test.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { Blob } from 'buffer';\nimport axios from 'axios';\nimport { NftStorageService } from '../../../services/file-storages/nft-storage/nft-storage-service';\nimport { dictionary } from '../../../utils/constants/dictionary';\n\njest.mock('axios');\n\ndescribe('NftStorageService', () => {\n  const serviceUrl = 'https://api.nft.storage/';\n  const uploadUrl = 'upload';\n  const apiKeysList = ['testKey1', 'testKey2'];\n\n  let mockAxios: jest.Mocked<typeof axios>;\n\n  beforeEach(() => {\n    mockAxios = axios as jest.Mocked<typeof axios>;\n  });\n\n  it('should return the expected string when uploadFile is called', async () => {\n    const mockFile = new Blob([new Uint8Array([1, 2, 3])]);\n    const mockResponse = {\n      data: {\n        value: { cid: 'testCid' },\n      },\n    };\n    mockAxios.create.mockReturnValue(mockAxios);\n    mockAxios.post.mockResolvedValue(mockResponse);\n\n    const result = await new NftStorageService(serviceUrl, uploadUrl, apiKeysList).uploadFile(mockFile);\n\n    expect(result).toEqual('ipfs://testCid');\n  });\n\n  it('should throw an error when no API keys are provided', () => {\n    expect(() => new NftStorageService(serviceUrl, uploadUrl, [])).toThrow(dictionary.errors.noApiKeys);\n  });\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,IAAI,QAAQ,QAAQ;AAC7B,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,iBAAiB,QAAQ,iEAAiE;AACnG,SAASC,UAAU,QAAQ,qCAAqC;AAEhEC,IAAI,CAACC,IAAI,CAAC,OAAO,CAAC;AAElBC,QAAQ,CAAC,mBAAmB,EAAE,MAAM;EAClC,MAAMC,UAAU,GAAG,0BAA0B;EAC7C,MAAMC,SAAS,GAAG,QAAQ;EAC1B,MAAMC,WAAW,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC;EAE5C,IAAIC,SAAoC;EAExCC,UAAU,CAAC,MAAM;IACfD,SAAS,GAAGT,KAAkC;EAChD,CAAC,CAAC;EAEFW,EAAE,CAAC,6DAA6D,EAAE,YAAY;IAC5E,MAAMC,QAAQ,GAAG,IAAIb,IAAI,CAAC,CAAC,IAAIc,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACtD,MAAMC,YAAY,GAAG;MACnBC,IAAI,EAAE;QACJC,KAAK,EAAE;UAAEC,GAAG,EAAE;QAAU;MAC1B;IACF,CAAC;IACDR,SAAS,CAACS,MAAM,CAACC,eAAe,CAACV,SAAS,CAAC;IAC3CA,SAAS,CAACW,IAAI,CAACC,iBAAiB,CAACP,YAAY,CAAC;IAE9C,MAAMQ,MAAM,GAAG,MAAM,IAAIrB,iBAAiB,CAACK,UAAU,EAAEC,SAAS,EAAEC,WAAW,CAAC,CAACe,UAAU,CAACX,QAAQ,CAAC;IAEnGY,MAAM,CAACF,MAAM,CAAC,CAACG,OAAO,CAAC,gBAAgB,CAAC;EAC1C,CAAC,CAAC;EAEFd,EAAE,CAAC,qDAAqD,EAAE,MAAM;IAC9Da,MAAM,CAAC,MAAM,IAAIvB,iBAAiB,CAACK,UAAU,EAAEC,SAAS,EAAE,EAAE,CAAC,CAAC,CAACmB,OAAO,CAACxB,UAAU,CAACyB,MAAM,CAACC,SAAS,CAAC;EACrG,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}