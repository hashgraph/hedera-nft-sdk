{"version":3,"file":"estimate-nft-minting-in-hbar-e2e.test.js","names":["nftSDK","Hbar","TokenMintTransaction","LONG_E2E_TIMEOUT","estimateNftMintingInHbar","mintingMaxTransactionFee","roundToPrecision","isWithinAcceptableDifference","describe","testCases","amount","forEach","it","tokenId","createCollection","collectionName","collectionSymbol","metaData","Array","fill","CIDs","map","Buffer","from","transaction","setTokenId","setMaxTransactionFee","setMetadata","freezeWith","client","txResponse","execute","record","getRecord","estimatedHbarNumber","amountOfNfts","network","estimatedHbars","transactionFeeHbars","transactionFee","toTinybars","toNumber","estimatedHbarsValue","expect","toBeDefined","transactionId","toBe"],"sources":["../../../../../src/test/e2e/minting/estimate-nft-minting-in-hbar-e2e.test.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { nftSDK } from '../e2e-consts';\nimport { Hbar, TokenMintTransaction } from '@hashgraph/sdk';\nimport { LONG_E2E_TIMEOUT } from '../../__mocks__/consts';\nimport { estimateNftMintingInHbar } from '../../../nftSDKFunctions/estimate-nft-minting-in-hbar';\nimport { mintingMaxTransactionFee } from '../../../utils/const';\nimport { roundToPrecision } from '../../helpers/round-to-precision';\nimport { isWithinAcceptableDifference } from '../../helpers/is-within-acceptable-difference';\n\ndescribe('mintSharedMetadata function e2e', () => {\n  const testCases = [{ amount: 1 }, { amount: 3 }, { amount: 10 }];\n\n  testCases.forEach(({ amount }) => {\n    it(\n      `Creating a token and minting ${amount} NFTs into it. Then checking estimated cost`,\n      async () => {\n        const tokenId = await nftSDK.createCollection({\n          collectionName: 'test_name',\n          collectionSymbol: 'test_symbol',\n        });\n\n        const metaData = new Array(amount).fill('www.youtube.com');\n        const CIDs = metaData.map((metaData) => Buffer.from(metaData));\n\n        const transaction = new TokenMintTransaction()\n          .setTokenId(tokenId)\n          .setMaxTransactionFee(new Hbar(mintingMaxTransactionFee))\n          .setMetadata(CIDs)\n          .freezeWith(nftSDK.client);\n\n        const txResponse = await transaction.execute(nftSDK.client);\n        const record = await txResponse.getRecord(nftSDK.client);\n\n        const estimatedHbarNumber = await estimateNftMintingInHbar({\n          amountOfNfts: amount,\n          network: 'testnet',\n        });\n        const estimatedHbars = new Hbar(roundToPrecision(estimatedHbarNumber, 6));\n\n        const transactionFeeHbars = record.transactionFee.toTinybars().toNumber();\n        const estimatedHbarsValue = estimatedHbars.toTinybars().toNumber();\n\n        expect(tokenId).toBeDefined();\n        expect(record.transactionId).toBeDefined();\n        expect(record.transactionFee).toBeDefined();\n        expect(isWithinAcceptableDifference(estimatedHbarsValue, transactionFeeHbars)).toBe(true);\n      },\n      LONG_E2E_TIMEOUT\n    );\n  });\n});\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,MAAM,QAAQ,eAAe;AACtC,SAASC,IAAI,EAAEC,oBAAoB,QAAQ,gBAAgB;AAC3D,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,SAASC,wBAAwB,QAAQ,uDAAuD;AAChG,SAASC,wBAAwB,QAAQ,sBAAsB;AAC/D,SAASC,gBAAgB,QAAQ,kCAAkC;AACnE,SAASC,4BAA4B,QAAQ,+CAA+C;AAE5FC,QAAQ,CAAC,iCAAiC,EAAE,MAAM;EAChD,MAAMC,SAAS,GAAG,CAAC;IAAEC,MAAM,EAAE;EAAE,CAAC,EAAE;IAAEA,MAAM,EAAE;EAAE,CAAC,EAAE;IAAEA,MAAM,EAAE;EAAG,CAAC,CAAC;EAEhED,SAAS,CAACE,OAAO,CAAC,CAAC;IAAED;EAAO,CAAC,KAAK;IAChCE,EAAE,CACC,gCAA+BF,MAAO,6CAA4C,EACnF,YAAY;MACV,MAAMG,OAAO,GAAG,MAAMb,MAAM,CAACc,gBAAgB,CAAC;QAC5CC,cAAc,EAAE,WAAW;QAC3BC,gBAAgB,EAAE;MACpB,CAAC,CAAC;MAEF,MAAMC,QAAQ,GAAG,IAAIC,KAAK,CAACR,MAAM,CAAC,CAACS,IAAI,CAAC,iBAAiB,CAAC;MAC1D,MAAMC,IAAI,GAAGH,QAAQ,CAACI,GAAG,CAAEJ,QAAQ,IAAKK,MAAM,CAACC,IAAI,CAACN,QAAQ,CAAC,CAAC;MAE9D,MAAMO,WAAW,GAAG,IAAItB,oBAAoB,CAAC,CAAC,CAC3CuB,UAAU,CAACZ,OAAO,CAAC,CACnBa,oBAAoB,CAAC,IAAIzB,IAAI,CAACI,wBAAwB,CAAC,CAAC,CACxDsB,WAAW,CAACP,IAAI,CAAC,CACjBQ,UAAU,CAAC5B,MAAM,CAAC6B,MAAM,CAAC;MAE5B,MAAMC,UAAU,GAAG,MAAMN,WAAW,CAACO,OAAO,CAAC/B,MAAM,CAAC6B,MAAM,CAAC;MAC3D,MAAMG,MAAM,GAAG,MAAMF,UAAU,CAACG,SAAS,CAACjC,MAAM,CAAC6B,MAAM,CAAC;MAExD,MAAMK,mBAAmB,GAAG,MAAM9B,wBAAwB,CAAC;QACzD+B,YAAY,EAAEzB,MAAM;QACpB0B,OAAO,EAAE;MACX,CAAC,CAAC;MACF,MAAMC,cAAc,GAAG,IAAIpC,IAAI,CAACK,gBAAgB,CAAC4B,mBAAmB,EAAE,CAAC,CAAC,CAAC;MAEzE,MAAMI,mBAAmB,GAAGN,MAAM,CAACO,cAAc,CAACC,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MACzE,MAAMC,mBAAmB,GAAGL,cAAc,CAACG,UAAU,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;MAElEE,MAAM,CAAC9B,OAAO,CAAC,CAAC+B,WAAW,CAAC,CAAC;MAC7BD,MAAM,CAACX,MAAM,CAACa,aAAa,CAAC,CAACD,WAAW,CAAC,CAAC;MAC1CD,MAAM,CAACX,MAAM,CAACO,cAAc,CAAC,CAACK,WAAW,CAAC,CAAC;MAC3CD,MAAM,CAACpC,4BAA4B,CAACmC,mBAAmB,EAAEJ,mBAAmB,CAAC,CAAC,CAACQ,IAAI,CAAC,IAAI,CAAC;IAC3F,CAAC,EACD3C,gBACF,CAAC;EACH,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}