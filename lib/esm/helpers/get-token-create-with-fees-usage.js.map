{"version":3,"file":"get-token-create-with-fees-usage.js","names":["getTokenCreateWithFeesUsage","customFees","tokenUsage","commonUsageData","fixedFees","filter","fee","_toProtobuf","fixedFee","royaltyFees","royaltyFee","numFixedHbarCustomFees","numFixedHtsCustomFees","numRoyaltyNoFallbackCustomFees","numRoyaltyHbarFallbackCustomFees","numRoyaltyHtsFallbackCustomFees","forEach","hbarAmount","_fallbackFee","denominatingTokenId"],"sources":["../../../src/helpers/get-token-create-with-fees-usage.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { TokenCreateUsage, TokenCreateWithFeesUsage } from '../types/estimate-create-collection';\nimport { CustomFixedFee, CustomRoyaltyFee } from '@hashgraph/sdk';\nimport { CustomFeeType } from '../types/create-collection';\n\nexport const getTokenCreateWithFeesUsage = ({\n  customFees,\n  tokenUsage,\n}: {\n  customFees?: CustomFeeType[];\n  tokenUsage?: TokenCreateUsage;\n}): TokenCreateWithFeesUsage | undefined => {\n  const commonUsageData = tokenUsage;\n  if (!commonUsageData) return;\n\n  const fixedFees = customFees?.filter((fee: CustomFeeType): fee is CustomFixedFee => {\n    return !!fee._toProtobuf().fixedFee;\n  });\n\n  const royaltyFees = customFees?.filter((fee: CustomFeeType): fee is CustomRoyaltyFee => {\n    return !!fee._toProtobuf().royaltyFee;\n  });\n\n  let numFixedHbarCustomFees = 0;\n  let numFixedHtsCustomFees = 0;\n  let numRoyaltyNoFallbackCustomFees = 0;\n  let numRoyaltyHbarFallbackCustomFees = 0;\n  let numRoyaltyHtsFallbackCustomFees = 0;\n\n  fixedFees?.forEach((fee) => {\n    if (fee.hbarAmount) {\n      numFixedHbarCustomFees++;\n    } else {\n      numFixedHtsCustomFees++;\n    }\n  });\n\n  royaltyFees?.forEach((fee) => {\n    if (!fee._fallbackFee) {\n      numRoyaltyNoFallbackCustomFees++;\n      return;\n    }\n\n    if (fee._fallbackFee.denominatingTokenId) {\n      numRoyaltyHtsFallbackCustomFees++;\n      return;\n    } else {\n      numRoyaltyHbarFallbackCustomFees++;\n    }\n  });\n\n  return {\n    ...commonUsageData,\n    numFixedHbarCustomFees,\n    numFixedHtsCustomFees,\n    numRoyaltyNoFallbackCustomFees,\n    numRoyaltyHbarFallbackCustomFees,\n    numRoyaltyHtsFallbackCustomFees,\n  };\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKA,OAAO,MAAMA,2BAA2B,GAAGA,CAAC;EAC1CC,UAAU;EACVC;AAIF,CAAC,KAA2C;EAC1C,MAAMC,eAAe,GAAGD,UAAU;EAClC,IAAI,CAACC,eAAe,EAAE;EAEtB,MAAMC,SAAS,GAAGH,UAAU,EAAEI,MAAM,CAAEC,GAAkB,IAA4B;IAClF,OAAO,CAAC,CAACA,GAAG,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ;EACrC,CAAC,CAAC;EAEF,MAAMC,WAAW,GAAGR,UAAU,EAAEI,MAAM,CAAEC,GAAkB,IAA8B;IACtF,OAAO,CAAC,CAACA,GAAG,CAACC,WAAW,CAAC,CAAC,CAACG,UAAU;EACvC,CAAC,CAAC;EAEF,IAAIC,sBAAsB,GAAG,CAAC;EAC9B,IAAIC,qBAAqB,GAAG,CAAC;EAC7B,IAAIC,8BAA8B,GAAG,CAAC;EACtC,IAAIC,gCAAgC,GAAG,CAAC;EACxC,IAAIC,+BAA+B,GAAG,CAAC;EAEvCX,SAAS,EAAEY,OAAO,CAAEV,GAAG,IAAK;IAC1B,IAAIA,GAAG,CAACW,UAAU,EAAE;MAClBN,sBAAsB,EAAE;IAC1B,CAAC,MAAM;MACLC,qBAAqB,EAAE;IACzB;EACF,CAAC,CAAC;EAEFH,WAAW,EAAEO,OAAO,CAAEV,GAAG,IAAK;IAC5B,IAAI,CAACA,GAAG,CAACY,YAAY,EAAE;MACrBL,8BAA8B,EAAE;MAChC;IACF;IAEA,IAAIP,GAAG,CAACY,YAAY,CAACC,mBAAmB,EAAE;MACxCJ,+BAA+B,EAAE;MACjC;IACF,CAAC,MAAM;MACLD,gCAAgC,EAAE;IACpC;EACF,CAAC,CAAC;EAEF,OAAO;IACL,GAAGX,eAAe;IAClBQ,sBAAsB;IACtBC,qBAAqB;IACrBC,8BAA8B;IAC9BC,gCAAgC;IAChCC;EACF,CAAC;AACH,CAAC","ignoreList":[]}