{"version":3,"file":"mint-unique-metadata-function.js","names":["dictionary","validatePropsForUniqueNFTMinting","getDataFromFile","MintingError","mintToken","mintUniqueMetadataFunction","client","tokenId","batchSize","supplyKey","pathToMetadataURIsFile","metadataArray","mintedNFTs","metaData","length","Error","hederaActions","metadataRequired","numberOfCalls","Math","ceil","i","batch","slice","mintTokenReceipt","result","serials","map","longValue","index","content","serialNumber","toNumber","push","error","mintingError","flat"],"sources":["../../../src/nftSDKFunctions/mint-unique-metadata-function.ts"],"sourcesContent":["/*-\n *\n * Hedera NFT SDK\n *\n * Copyright (C) 2024 Hedera Hashgraph, LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\nimport { dictionary } from '../utils/constants/dictionary';\nimport { MintedNFTType, MintUniqueTokenType } from '../types/mint-token';\nimport { validatePropsForUniqueNFTMinting } from '../utils/validate-props';\nimport { getDataFromFile } from '../helpers/get-data-from-file';\nimport { MintingError } from '../utils/minting-error';\nimport { mintToken } from './mint-token';\n\nexport const mintUniqueMetadataFunction = async ({\n  client,\n  tokenId,\n  batchSize = 5,\n  supplyKey,\n  pathToMetadataURIsFile,\n  metadataArray,\n}: MintUniqueTokenType) => {\n  validatePropsForUniqueNFTMinting({\n    batchSize,\n    tokenId,\n    pathToMetadataURIsFile,\n    supplyKey,\n    metadataArray,\n  });\n  const mintedNFTs: MintedNFTType[] = [];\n\n  const metaData = pathToMetadataURIsFile ? await getDataFromFile(pathToMetadataURIsFile) : metadataArray || [];\n  if (!metaData.length) throw new Error(dictionary.hederaActions.metadataRequired);\n\n  try {\n    const numberOfCalls = Math.ceil(metaData.length / batchSize);\n    for (let i = 0; i < numberOfCalls; i++) {\n      const batch = metaData.slice(i * batchSize, (i + 1) * batchSize);\n      const mintTokenReceipt = await mintToken(batch, tokenId, supplyKey, client);\n\n      const result: MintedNFTType[] = mintTokenReceipt?.serials.map((longValue, index) => {\n        return {\n          content: batch[index],\n          serialNumber: longValue.toNumber(),\n        };\n      });\n\n      if (result) {\n        mintedNFTs.push(...result);\n      }\n    }\n  } catch (error) {\n    throw new MintingError(`${dictionary.hederaActions.mintingError} ${error}`, mintedNFTs.flat());\n  }\n\n  return mintedNFTs.flat();\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAU,QAAQ,+BAA+B;AAE1D,SAASC,gCAAgC,QAAQ,yBAAyB;AAC1E,SAASC,eAAe,QAAQ,+BAA+B;AAC/D,SAASC,YAAY,QAAQ,wBAAwB;AACrD,SAASC,SAAS,QAAQ,cAAc;AAExC,OAAO,MAAMC,0BAA0B,GAAG,MAAAA,CAAO;EAC/CC,MAAM;EACNC,OAAO;EACPC,SAAS,GAAG,CAAC;EACbC,SAAS;EACTC,sBAAsB;EACtBC;AACmB,CAAC,KAAK;EACzBV,gCAAgC,CAAC;IAC/BO,SAAS;IACTD,OAAO;IACPG,sBAAsB;IACtBD,SAAS;IACTE;EACF,CAAC,CAAC;EACF,MAAMC,UAA2B,GAAG,EAAE;EAEtC,MAAMC,QAAQ,GAAGH,sBAAsB,GAAG,MAAMR,eAAe,CAACQ,sBAAsB,CAAC,GAAGC,aAAa,IAAI,EAAE;EAC7G,IAAI,CAACE,QAAQ,CAACC,MAAM,EAAE,MAAM,IAAIC,KAAK,CAACf,UAAU,CAACgB,aAAa,CAACC,gBAAgB,CAAC;EAEhF,IAAI;IACF,MAAMC,aAAa,GAAGC,IAAI,CAACC,IAAI,CAACP,QAAQ,CAACC,MAAM,GAAGN,SAAS,CAAC;IAC5D,KAAK,IAAIa,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,aAAa,EAAEG,CAAC,EAAE,EAAE;MACtC,MAAMC,KAAK,GAAGT,QAAQ,CAACU,KAAK,CAACF,CAAC,GAAGb,SAAS,EAAE,CAACa,CAAC,GAAG,CAAC,IAAIb,SAAS,CAAC;MAChE,MAAMgB,gBAAgB,GAAG,MAAMpB,SAAS,CAACkB,KAAK,EAAEf,OAAO,EAAEE,SAAS,EAAEH,MAAM,CAAC;MAE3E,MAAMmB,MAAuB,GAAGD,gBAAgB,EAAEE,OAAO,CAACC,GAAG,CAAC,CAACC,SAAS,EAAEC,KAAK,KAAK;QAClF,OAAO;UACLC,OAAO,EAAER,KAAK,CAACO,KAAK,CAAC;UACrBE,YAAY,EAAEH,SAAS,CAACI,QAAQ,CAAC;QACnC,CAAC;MACH,CAAC,CAAC;MAEF,IAAIP,MAAM,EAAE;QACVb,UAAU,CAACqB,IAAI,CAAC,GAAGR,MAAM,CAAC;MAC5B;IACF;EACF,CAAC,CAAC,OAAOS,KAAK,EAAE;IACd,MAAM,IAAI/B,YAAY,CAAE,GAAEH,UAAU,CAACgB,aAAa,CAACmB,YAAa,IAAGD,KAAM,EAAC,EAAEtB,UAAU,CAACwB,IAAI,CAAC,CAAC,CAAC;EAChG;EAEA,OAAOxB,UAAU,CAACwB,IAAI,CAAC,CAAC;AAC1B,CAAC","ignoreList":[]}